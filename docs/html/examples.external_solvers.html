<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Using External Solvers &#8212; pomdp_py 1.3.3 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=253395cc" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=0aabb5f1"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">A framework to build and solve POMDP problems (v1.3.3).</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=h2r&repo=pomdp-py&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Using External Solvers</a><ul>
<li><a class="reference internal" href="#converting-a-pomdp-py-agent-to-a-pomdp-file">Converting a pomdp_py <code class="xref py py-mod docutils literal notranslate"><span class="pre">Agent</span></code> to a POMDP File</a><ul>
<li><a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.to_pomdp_file"><code class="docutils literal notranslate"><span class="pre">to_pomdp_file()</span></code></a></li>
<li><a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.to_pomdpx_file"><code class="docutils literal notranslate"><span class="pre">to_pomdpx_file()</span></code></a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-pomdp-solve">Using pomdp-solve</a><ul>
<li><a class="reference internal" href="#pomdp_py.utils.interfaces.solvers.vi_pruning"><code class="docutils literal notranslate"><span class="pre">vi_pruning()</span></code></a></li>
<li><a class="reference internal" href="#id2">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-sarsop">Using sarsop</a><ul>
<li><a class="reference internal" href="#pomdp_py.utils.interfaces.solvers.sarsop"><code class="docutils literal notranslate"><span class="pre">sarsop()</span></code></a></li>
<li><a class="reference internal" href="#id4">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#policygraph-and-alphavectorpolicy">PolicyGraph and AlphaVectorPolicy</a><ul>
<li><a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.PolicyGraph"><code class="docutils literal notranslate"><span class="pre">PolicyGraph</span></code></a><ul>
<li><a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.PolicyGraph.construct"><code class="docutils literal notranslate"><span class="pre">PolicyGraph.construct()</span></code></a></li>
<li><a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.PolicyGraph.plan"><code class="docutils literal notranslate"><span class="pre">PolicyGraph.plan()</span></code></a></li>
<li><a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.PolicyGraph.update"><code class="docutils literal notranslate"><span class="pre">PolicyGraph.update()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy"><code class="docutils literal notranslate"><span class="pre">AlphaVectorPolicy</span></code></a><ul>
<li><a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy.plan"><code class="docutils literal notranslate"><span class="pre">AlphaVectorPolicy.plan()</span></code></a></li>
<li><a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy.value"><code class="docutils literal notranslate"><span class="pre">AlphaVectorPolicy.value()</span></code></a></li>
<li><a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy.construct"><code class="docutils literal notranslate"><span class="pre">AlphaVectorPolicy.construct()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="design_principles.html">Design Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="existing_solvers.html">Existing POMDP Solvers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">pomdp_py</a></li>
<li class="toctree-l1"><a class="reference internal" href="problems/modules.html">pomdp_problems</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://h2r.cs.brown.edu/">H2R lab</a></li>
    
    <li class="toctree-l1"><a href="http://kaiyuzh.me">Kaiyu's homepage</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>


<h3 class="donation">Donate/support</h3>



<p>
<a class="badge" href="paypal.me/zkytony/10">
<img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate">
</a>
</p>





        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-pomdp_py.utils.interfaces.solvers">
<span id="using-external-solvers"></span><h1>Using External Solvers<a class="headerlink" href="#module-pomdp_py.utils.interfaces.solvers" title="Permalink to this heading">¶</a></h1>
<p><a class="reference external" href="https://h2r.github.io/pomdp-py/html/">pomdp_py</a> provides function calls to use external solvers,
given a POMDP defined using pomdp_py interfaces. Currently, we interface with:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.pomdp.org/code/index.html">pomdp-solve</a> by Anthony R. Cassandra</p></li>
<li><p><a class="reference external" href="https://github.com/AdaCompNUS/sarsop">SARSOP</a> by NUS</p></li>
</ul>
<p>We hope to interface with:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/JuliaPOMDP/POMDPs.jl">POMDP.jl</a></p></li>
<li><p>more? Help us if you can!</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<nav class="contents local" id="table-of-contents">
<p class="topic-title"><strong>Table of Contents</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#converting-a-pomdp-py-agent-to-a-pomdp-file" id="id5">Converting a pomdp_py <a class="reference internal" href="api/pomdp_py.framework.html#pomdp_py.framework.basics.Agent" title="pomdp_py.framework.basics.Agent"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Agent</span></code></a> to a POMDP File</a></p></li>
<li><p><a class="reference internal" href="#using-pomdp-solve" id="id6">Using pomdp-solve</a></p></li>
<li><p><a class="reference internal" href="#using-sarsop" id="id7">Using sarsop</a></p></li>
<li><p><a class="reference internal" href="#policygraph-and-alphavectorpolicy" id="id8">PolicyGraph and AlphaVectorPolicy</a></p></li>
</ul>
</nav>
<section id="converting-a-pomdp-py-agent-to-a-pomdp-file">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Converting a pomdp_py <a class="reference internal" href="api/pomdp_py.framework.html#pomdp_py.framework.basics.Agent" title="pomdp_py.framework.basics.Agent"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Agent</span></code></a> to a POMDP File</a><a class="headerlink" href="#converting-a-pomdp-py-agent-to-a-pomdp-file" title="Permalink to this heading">¶</a></h2>
<p>Many existing libraries take as input a POMDP model written in a text file.
There are two file formats: <code class="code docutils literal notranslate"><span class="pre">.POMDP</span></code> <a class="reference external" href="http://www.pomdp.org/code/pomdp-file-spec.html">(link)</a> and <code class="code docutils literal notranslate"><span class="pre">.POMDPX</span></code> <a class="reference external" href="https://bigbird.comp.nus.edu.sg/pmwiki/farm/appl/index.php?n=Main.PomdpXDocumentation">(link)</a>. A <code class="code docutils literal notranslate"><span class="pre">.POMDP</span></code> file can be converted
into a <code class="code docutils literal notranslate"><span class="pre">.POMDPX</span></code> file using the <code class="code docutils literal notranslate"><span class="pre">pomdpconvert</span></code> program that is part of the <a class="reference external" href="https://github.com/AdaCompNUS/sarsop">SARSOP toolkit</a>.</p>
<p>If a pomdp_py <a class="reference internal" href="api/pomdp_py.framework.html#pomdp_py.framework.basics.Agent" title="pomdp_py.framework.basics.Agent"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Agent</span></code></a> has enumerable state <span class="math notranslate nohighlight">\(S\)</span>, action <span class="math notranslate nohighlight">\(A\)</span>, and observation spaces <span class="math notranslate nohighlight">\(\Omega\)</span>, with explicitly defined probability for its models (<span class="math notranslate nohighlight">\(T,O,R\)</span>), then it can be converted to either the POMDP file Format (<a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.to_pomdp_file" title="pomdp_py.utils.interfaces.conversion.to_pomdp_file"><code class="xref py py-mod docutils literal notranslate"><span class="pre">to_pomdp_file</span></code></a>) or the POMDPX file format (<a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.to_pomdpx_file" title="pomdp_py.utils.interfaces.conversion.to_pomdpx_file"><code class="xref py py-mod docutils literal notranslate"><span class="pre">to_pomdpx_file</span></code></a>).</p>
<dl class="py function">
<dt class="sig sig-object py" id="pomdp_py.utils.interfaces.conversion.to_pomdp_file">
<span class="sig-prename descclassname"><span class="pre">pomdp_py.utils.interfaces.conversion.</span></span><span class="sig-name descname"><span class="pre">to_pomdp_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">discount_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.95</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">float_precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pomdp_py/utils/interfaces/conversion.html#to_pomdp_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pomdp_py.utils.interfaces.conversion.to_pomdp_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass in an Agent, and use its components to generate
a .pomdp file to <cite>output_path</cite>.</p>
<p>The .pomdp file format is specified at:
<a class="reference external" href="http://www.pomdp.org/code/pomdp-file-spec.html">http://www.pomdp.org/code/pomdp-file-spec.html</a></p>
<p>Note:</p>
<ul class="simple">
<li><p>It is assumed that the reward is independent of the observation.</p></li>
<li><p>The state, action, and observations of the agent must be
explicitly enumerable.</p></li>
<li><p>The state, action and observations of the agent must be
convertable to a string that does not contain any blank space.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent</strong> (<a class="reference internal" href="api/pomdp_py.framework.html#pomdp_py.framework.basics.Agent" title="pomdp_py.framework.basics.Agent"><em>Agent</em></a>) – The agent</p></li>
<li><p><strong>output_path</strong> (<em>str</em>) – The path of the output file to write in. Optional.
Default None.</p></li>
<li><p><strong>discount_factor</strong> (<em>float</em>) – The discount factor</p></li>
<li><p><strong>float_precision</strong> (<em>int</em>) – Number of decimals for float to str conversion.
Default 6.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>The list of states, actions, observations that</dt><dd><p>are ordered in the same way as they are in the .pomdp file.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(list, list, list)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pomdp_py.utils.interfaces.conversion.to_pomdpx_file">
<span class="sig-prename descclassname"><span class="pre">pomdp_py.utils.interfaces.conversion.</span></span><span class="sig-name descname"><span class="pre">to_pomdpx_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pomdpconvert_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">discount_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.95</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pomdp_py/utils/interfaces/conversion.html#to_pomdpx_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pomdp_py.utils.interfaces.conversion.to_pomdpx_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts an agent to a pomdpx file. This works by first converting the agent into a .pomdp file and then
using the <code class="code docutils literal notranslate"><span class="pre">pomdpconvert</span></code> utility program to convert that file to a .pomdpx file. Check out
<code class="code docutils literal notranslate"><span class="pre">pomdpconvert</span></code> at <a class="reference external" href="https://github.com/AdaCompNUS/sarsop">github://AdaCompNUS/sarsop</a></p>
<p>Follow the instructions at <a class="reference external" href="https://github.com/AdaCompNUS/sarsop">https://github.com/AdaCompNUS/sarsop</a>
to download and build sarsop (I tested on Ubuntu 18.04, gcc version 7.5.0)</p>
<p>See documentation for pomdpx at:
<a class="reference external" href="https://bigbird.comp.nus.edu.sg/pmwiki/farm/appl/index.php?n=Main.PomdpXDocumentation">https://bigbird.comp.nus.edu.sg/pmwiki/farm/appl/index.php?n=Main.PomdpXDocumentation</a></p>
<p>First converts the agent into .pomdp, then convert it to pomdpx.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent</strong> (<a class="reference internal" href="api/pomdp_py.framework.html#pomdp_py.framework.basics.Agent" title="pomdp_py.framework.basics.Agent"><em>Agent</em></a>) – The agent</p></li>
<li><p><strong>pomdpconvert_path</strong> (<em>str</em>) – Path to the <code class="code docutils literal notranslate"><span class="pre">pomdpconvert</span></code> binary</p></li>
<li><p><strong>output_path</strong> (<em>str</em>) – The path of the output file to write in. Optional.
Default None.</p></li>
<li><p><strong>discount_factor</strong> (<em>float</em>) – The discount factor</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h3>
<p>Let’s use the existing <code class="xref py py-mod docutils literal notranslate"><span class="pre">Tiger</span></code> problem as an example.
First we create an instance of the Tiger problem:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pomdp_problems.tiger.tiger_problem</span> <span class="kn">import</span> <span class="n">TigerProblem</span><span class="p">,</span> <span class="n">TigerState</span>
<span class="n">init_state</span> <span class="o">=</span> <span class="s2">&quot;tiger-left&quot;</span>
<span class="n">tiger</span> <span class="o">=</span> <span class="n">TigerProblem</span><span class="p">(</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">TigerState</span><span class="p">(</span><span class="n">init_state</span><span class="p">),</span>
             <span class="n">pomdp_py</span><span class="o">.</span><span class="n">Histogram</span><span class="p">({</span><span class="n">TigerState</span><span class="p">(</span><span class="s2">&quot;tiger-left&quot;</span><span class="p">):</span> <span class="mf">0.5</span><span class="p">,</span>
                                 <span class="n">TigerState</span><span class="p">(</span><span class="s2">&quot;tiger-right&quot;</span><span class="p">):</span> <span class="mf">0.5</span><span class="p">}))</span>
</pre></div>
</div>
<p>convert to .POMDP file</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pomdp_py</span> <span class="kn">import</span> <span class="n">to_pomdp_file</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;./test_tiger.POMDP&quot;</span>
<span class="n">to_pomdp_file</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">discount_factor</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>
</div>
<p>convert to .POMDPX file</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pomdp_py</span> <span class="kn">import</span> <span class="n">to_pomdpx_file</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;./test_tiger.POMDPX&quot;</span>
<span class="n">pomdpconvert_path</span> <span class="o">=</span> <span class="s2">&quot;~/software/sarsop/src/pomdpconvert&quot;</span>
<span class="n">to_pomdpx_file</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="p">,</span> <span class="n">pomdpconvert_path</span><span class="p">,</span>
               <span class="n">output_path</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
               <span class="n">discount_factor</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="using-pomdp-solve">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Using pomdp-solve</a><a class="headerlink" href="#using-pomdp-solve" title="Permalink to this heading">¶</a></h2>
<p>Pass in the agent to the <a class="reference internal" href="#pomdp_py.utils.interfaces.solvers.vi_pruning" title="pomdp_py.utils.interfaces.solvers.vi_pruning"><code class="xref py py-mod docutils literal notranslate"><span class="pre">vi_pruning</span></code></a> function,
and it will run the <cite>pomdp-solve</cite> binary (using specified path)</p>
<dl class="py function">
<dt class="sig sig-object py" id="pomdp_py.utils.interfaces.solvers.vi_pruning">
<span class="sig-prename descclassname"><span class="pre">pomdp_py.utils.interfaces.solvers.</span></span><span class="sig-name descname"><span class="pre">vi_pruning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pomdp_solve_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">discount_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.95</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pomdp_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'temp-pomdp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_generated_files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_policy_graph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pomdp_py/utils/interfaces/solvers.html#vi_pruning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pomdp_py.utils.interfaces.solvers.vi_pruning" title="Permalink to this definition">¶</a></dt>
<dd><p>Value Iteration with pruning, using the software pomdp-solve
<a class="reference external" href="https://www.pomdp.org/code/">https://www.pomdp.org/code/</a> developed by Anthony R. Cassandra.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent</strong> (<em>pomdp_py.Agent</em>) – The agent that contains the POMDP definition</p></li>
<li><p><strong>pomdp_solve_path</strong> (<em>str</em>) – Path to the <cite>pomdp_solve</cite> binary generated after
compiling the pomdp-solve library.</p></li>
<li><p><strong>options</strong> (<em>list</em>) – <p>Additional options to pass in to the command line interface.
The options should be a list of strings, such as [“-stop_criteria”, “weak”, …]
Some useful options are:</p>
<blockquote>
<div><p>-horizon &lt;int&gt;
-time_limit &lt;int&gt;</p>
</div></blockquote>
</p></li>
<li><p><strong>pomdp_name</strong> (<em>str</em>) – The name used to create the .pomdp file.</p></li>
<li><p><strong>remove_generated_files</strong> (<em>bool</em>) – True if after policy is computed,
the .pomdp, .alpha, .pg files are removed. Default is False.</p></li>
<li><p><strong>return_policy_graph</strong> (<em>bool</em>) – True if return the policy as a PolicyGraph.
By default is False, in which case an AlphaVectorPolicy is returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The policy returned by the solver.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.PolicyGraph" title="pomdp_py.utils.interfaces.conversion.PolicyGraph">PolicyGraph</a> or <a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy" title="pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy">AlphaVectorPolicy</a></p>
</dd>
</dl>
</dd></dl>

<section id="id2">
<h3>Example<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<p><strong>Setting the path.</strong> After downloading and installing <a class="reference external" href="https://www.pomdp.org/code/">pomdp-solve</a>,
a binary executable called <code class="code docutils literal notranslate"><span class="pre">pomdp-solve</span></code> should appear under <code class="code docutils literal notranslate"><span class="pre">path/to/pomdp-solve-&lt;version&gt;/src/</span></code>. We create a variable in Python
to point to this path:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pomdp_solve_path</span> <span class="o">=</span> <span class="s2">&quot;path/to/pomdp-solve-&lt;version&gt;/src/pomdp-solve&quot;</span>
</pre></div>
</div>
<p><strong>Computing a policy.</strong> We recommend using the <a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy" title="pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AlphaVectorPolicy</span></code></a>;
That means setting <code class="code docutils literal notranslate"><span class="pre">return_policy_graph</span></code> to False (optional).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pomdp_py</span> <span class="kn">import</span> <span class="n">vi_pruning</span>
<span class="n">policy</span> <span class="o">=</span> <span class="n">vi_pruning</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="p">,</span> <span class="n">pomdp_solve_path</span><span class="p">,</span> <span class="n">discount_factor</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
                    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-horizon&quot;</span><span class="p">,</span> <span class="s2">&quot;100&quot;</span><span class="p">],</span>
                    <span class="n">remove_generated_files</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">return_policy_graph</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Using the policy.</strong> Here the code checks whether the policy is a  <a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy" title="pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AlphaVectorPolicy</span></code></a> or a  <a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.PolicyGraph" title="pomdp_py.utils.interfaces.conversion.PolicyGraph"><code class="xref py py-mod docutils literal notranslate"><span class="pre">PolicyGraph</span></code></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
     <span class="n">action</span> <span class="o">=</span> <span class="n">policy</span><span class="o">.</span><span class="n">plan</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="p">)</span>
     <span class="n">reward</span> <span class="o">=</span> <span class="n">tiger</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">state_transition</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">execute</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
     <span class="n">observation</span> <span class="o">=</span> <span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">observation_model</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>

     <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">policy</span><span class="p">,</span> <span class="n">PolicyGraph</span><span class="p">):</span>
         <span class="n">policy</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">observation</span><span class="p">)</span>
     <span class="k">else</span><span class="p">:</span>
         <span class="c1"># AlphaVectorPOlicy</span>
         <span class="c1"># ... perform belief update on agent</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">Complete example code:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pomdp_py</span>
<span class="kn">from</span> <span class="nn">pomdp_py</span> <span class="kn">import</span> <span class="n">vi_pruning</span>
<span class="kn">from</span> <span class="nn">pomdp_problems.tiger.tiger_problem</span> <span class="kn">import</span> <span class="n">TigerProblem</span><span class="p">,</span> <span class="n">TigerState</span>

<span class="c1"># Initialize problem</span>
<span class="n">init_state</span> <span class="o">=</span> <span class="s2">&quot;tiger-left&quot;</span>
<span class="n">tiger</span> <span class="o">=</span> <span class="n">TigerProblem</span><span class="p">(</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">TigerState</span><span class="p">(</span><span class="n">init_state</span><span class="p">),</span>
             <span class="n">pomdp_py</span><span class="o">.</span><span class="n">Histogram</span><span class="p">({</span><span class="n">TigerState</span><span class="p">(</span><span class="s2">&quot;tiger-left&quot;</span><span class="p">):</span> <span class="mf">0.5</span><span class="p">,</span>
                                 <span class="n">TigerState</span><span class="p">(</span><span class="s2">&quot;tiger-right&quot;</span><span class="p">):</span> <span class="mf">0.5</span><span class="p">}))</span>

<span class="c1"># Compute policy</span>
<span class="n">pomdp_solve_path</span> <span class="o">=</span> <span class="s2">&quot;path/to/pomdp-solve-&lt;version&gt;/src/pomdp-solve&quot;</span>
<span class="n">policy</span> <span class="o">=</span> <span class="n">vi_pruning</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="p">,</span> <span class="n">pomdp_solve_path</span><span class="p">,</span> <span class="n">discount_factor</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
                    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-horizon&quot;</span><span class="p">,</span> <span class="s2">&quot;100&quot;</span><span class="p">],</span>
                    <span class="n">remove_generated_files</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">return_policy_graph</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Simulate the POMDP using the policy</span>
<span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
     <span class="n">action</span> <span class="o">=</span> <span class="n">policy</span><span class="o">.</span><span class="n">plan</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="p">)</span>
     <span class="n">reward</span> <span class="o">=</span> <span class="n">tiger</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">state_transition</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">execute</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
     <span class="n">observation</span> <span class="o">=</span> <span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">observation_model</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>
     <span class="nb">print</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">cur_belief</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">observation</span><span class="p">,</span> <span class="n">reward</span><span class="p">)</span>

     <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">policy</span><span class="p">,</span> <span class="n">pomdp_py</span><span class="o">.</span><span class="n">PolicyGraph</span><span class="p">):</span>
         <span class="c1"># No belief update needed. Just update the policy graph</span>
         <span class="n">policy</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">observation</span><span class="p">)</span>
     <span class="k">else</span><span class="p">:</span>
         <span class="c1"># belief update is needed for AlphaVectorPolicy</span>
         <span class="n">new_belief</span> <span class="o">=</span> <span class="n">pomdp_py</span><span class="o">.</span><span class="n">update_histogram_belief</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">cur_belief</span><span class="p">,</span>
                                                       <span class="n">action</span><span class="p">,</span> <span class="n">observation</span><span class="p">,</span>
                                                       <span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">observation_model</span><span class="p">,</span>
                                                       <span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">transition_model</span><span class="p">)</span>
         <span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">set_belief</span><span class="p">(</span><span class="n">new_belief</span><span class="p">)</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Expected output (or similar):</div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> //****************\\
||   pomdp-solve    ||
||     v. 5.4       ||
 \\****************//
      PID=8239
- - - - - - - - - - - - - - - - - - - -
time_limit = 0
mcgs_prune_freq = 100
verbose = context
...
horizon = 100
...
- - - - - - - - - - - - - - - - - - - -
[Initializing POMDP ... done.]
[Initial policy has 1 vectors.]
++++++++++++++++++++++++++++++++++++++++
Epoch: 1...3 vectors in 0.00 secs. (0.00 total) (err=inf)
Epoch: 2...5 vectors in 0.00 secs. (0.00 total) (err=inf)
Epoch: 3...9 vectors in 0.00 secs. (0.00 total) (err=inf)
...
Epoch: 95...9 vectors in 0.00 secs. (2.39 total) (err=inf)
Epoch: 96...9 vectors in 0.00 secs. (2.39 total) (err=inf)
Epoch: 97...9 vectors in 0.00 secs. (2.39 total) (err=inf)
Epoch: 98...9 vectors in 0.00 secs. (2.39 total) (err=inf)
Epoch: 99...9 vectors in 0.00 secs. (2.39 total) (err=inf)
Epoch: 100...9 vectors in 0.01 secs. (2.40 total) (err=inf)
++++++++++++++++++++++++++++++++++++++++
Solution found.  See file:
        temp-pomdp.alpha
        temp-pomdp.pg
++++++++++++++++++++++++++++++++++++++++
User time = 0 hrs., 0 mins, 2.40 secs. (= 2.40 secs)
System time = 0 hrs., 0 mins, 0.00 secs. (= 0.00 secs)
Total execution time = 0 hrs., 0 mins, 2.40 secs. (= 2.40 secs)

** Warning **
        lp_solve reported 2 LPs with numerical instability.
[(TigerState(tiger-right), 0.5), (TigerState(tiger-left), 0.5)] listen tiger-left -1.0
[(TigerState(tiger-left), 0.85), (TigerState(tiger-right), 0.15)] listen tiger-left -1.0
[(TigerState(tiger-left), 0.9697986575573173), (TigerState(tiger-right), 0.03020134244268276)] open-right tiger-left 10.0
...
</pre></div>
</div>
</section>
</section>
<section id="using-sarsop">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Using sarsop</a><a class="headerlink" href="#using-sarsop" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pomdp_py.utils.interfaces.solvers.sarsop">
<span class="sig-prename descclassname"><span class="pre">pomdp_py.utils.interfaces.solvers.</span></span><span class="sig-name descname"><span class="pre">sarsop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pomdpsol_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">discount_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.95</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pomdp_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'temp-pomdp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_generated_files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pomdp_py/utils/interfaces/solvers.html#sarsop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pomdp_py.utils.interfaces.solvers.sarsop" title="Permalink to this definition">¶</a></dt>
<dd><p>SARSOP, using the binary from <a class="reference external" href="https://github.com/AdaCompNUS/sarsop">https://github.com/AdaCompNUS/sarsop</a>
This is an anytime POMDP planning algorithm</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent</strong> (<em>pomdp_py.Agent</em>) – The agent that defines the POMDP models</p></li>
<li><p><strong>pomdpsol_path</strong> (<em>str</em>) – Path to the <cite>pomdpsol</cite> binary</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The time limit (seconds) to run the algorithm until termination</p></li>
<li><p><strong>memory</strong> (<em>int</em>) – The memory size (mb) to run the algorithm until termination</p></li>
<li><p><strong>precision</strong> (<em>float</em>) – solver runs until regret is less than <cite>precision</cite></p></li>
<li><p><strong>pomdp_name</strong> (<em>str</em>) – Name of the .pomdp file that will be created when solving</p></li>
<li><p><strong>remove_generated_files</strong> (<em>bool</em>) – Remove created files during solving after finish.</p></li>
<li><p><strong>logfile</strong> (<em>str</em>) – Path to file to write the log of both stdout and stderr</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The policy returned by the solver.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy" title="pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy">AlphaVectorPolicy</a></p>
</dd>
</dl>
</dd></dl>

<section id="id4">
<h3>Example<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<p><strong>Setting the path.</strong> After building <cite>SARSOP &lt;https://github.com/AdaCompNUS/sarsop&gt;_</cite>, there is a
binary file <code class="code docutils literal notranslate"><span class="pre">pomdpsol</span></code> under <code class="code docutils literal notranslate"><span class="pre">path/to/sarsop/src</span></code>.
We create a variable in Python
to point to this path:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pomdpsol_path</span> <span class="o">=</span> <span class="s2">&quot;path/to/sarsop/src/pomdpsol&quot;</span>
</pre></div>
</div>
<p><strong>Computing a policy.</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pomdp_py</span> <span class="kn">import</span> <span class="n">sarsop</span>
<span class="n">policy</span> <span class="o">=</span> <span class="n">sarsop</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="p">,</span> <span class="n">pomdpsol_path</span><span class="p">,</span> <span class="n">discount_factor</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mf">0.000001</span><span class="p">,</span>
                <span class="n">remove_generated_files</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Using the policy.</strong> (Same as above, for the <a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy" title="pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AlphaVectorPolicy</span></code></a> case)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
     <span class="n">action</span> <span class="o">=</span> <span class="n">policy</span><span class="o">.</span><span class="n">plan</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="p">)</span>
     <span class="n">reward</span> <span class="o">=</span> <span class="n">tiger</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">state_transition</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">execute</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
     <span class="n">observation</span> <span class="o">=</span> <span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">observation_model</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>
     <span class="c1"># ... perform belief update on agent</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">Complete example code:</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pomdp_py</span>
<span class="kn">from</span> <span class="nn">pomdp_py</span> <span class="kn">import</span> <span class="n">sarsop</span>
<span class="kn">from</span> <span class="nn">pomdp_problems.tiger.tiger_problem</span> <span class="kn">import</span> <span class="n">TigerProblem</span><span class="p">,</span> <span class="n">TigerState</span>

<span class="c1"># Initialize problem</span>
<span class="n">init_state</span> <span class="o">=</span> <span class="s2">&quot;tiger-left&quot;</span>
<span class="n">tiger</span> <span class="o">=</span> <span class="n">TigerProblem</span><span class="p">(</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">TigerState</span><span class="p">(</span><span class="n">init_state</span><span class="p">),</span>
             <span class="n">pomdp_py</span><span class="o">.</span><span class="n">Histogram</span><span class="p">({</span><span class="n">TigerState</span><span class="p">(</span><span class="s2">&quot;tiger-left&quot;</span><span class="p">):</span> <span class="mf">0.5</span><span class="p">,</span>
                                 <span class="n">TigerState</span><span class="p">(</span><span class="s2">&quot;tiger-right&quot;</span><span class="p">):</span> <span class="mf">0.5</span><span class="p">}))</span>

<span class="c1"># Compute policy</span>
<span class="n">pomdpsol_path</span> <span class="o">=</span> <span class="s2">&quot;path/to/sarsop/src/pomdpsol&quot;</span>
<span class="n">policy</span> <span class="o">=</span> <span class="n">sarsop</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="p">,</span> <span class="n">pomdpsol_path</span><span class="p">,</span> <span class="n">discount_factor</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mf">0.000001</span><span class="p">,</span>
                <span class="n">remove_generated_files</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Simulate the POMDP using the policy</span>
<span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
     <span class="n">action</span> <span class="o">=</span> <span class="n">policy</span><span class="o">.</span><span class="n">plan</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="p">)</span>
     <span class="n">reward</span> <span class="o">=</span> <span class="n">tiger</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">state_transition</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">execute</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
     <span class="n">observation</span> <span class="o">=</span> <span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">observation_model</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>
     <span class="nb">print</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">cur_belief</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">observation</span><span class="p">,</span> <span class="n">reward</span><span class="p">)</span>

     <span class="c1"># belief update is needed for AlphaVectorPolicy</span>
     <span class="n">new_belief</span> <span class="o">=</span> <span class="n">pomdp_py</span><span class="o">.</span><span class="n">update_histogram_belief</span><span class="p">(</span><span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">cur_belief</span><span class="p">,</span>
                                                   <span class="n">action</span><span class="p">,</span> <span class="n">observation</span><span class="p">,</span>
                                                   <span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">observation_model</span><span class="p">,</span>
                                                   <span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">transition_model</span><span class="p">)</span>
     <span class="n">tiger</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">set_belief</span><span class="p">(</span><span class="n">new_belief</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Loading the model ...
  input file   : ./temp-pomdp.pomdp
  loading time : 0.00s

SARSOP initializing ...
  initialization time : 0.00s

-------------------------------------------------------------------------------
 Time   |#Trial |#Backup |LBound    |UBound    |Precision  |#Alphas |#Beliefs
-------------------------------------------------------------------------------
 0       0       0        -20        92.8205    112.821     4        1
 0       2       51       -6.2981    63.7547    70.0528     7        15
 0       4       103      2.35722    52.3746    50.0174     5        19
 0       6       155      6.44093    45.1431    38.7021     5        20
 0       8       205      12.1184    36.4409    24.3225     5        20
 ...
 0       40      1255     19.3714    19.3714    7.13808e-06 5        21
 0       41      1300     19.3714    19.3714    3.76277e-06 6        21
 0       42      1350     19.3714    19.3714    1.75044e-06 12       21
 0       43      1393     19.3714    19.3714    9.22729e-07 11       21
-------------------------------------------------------------------------------

SARSOP finishing ...
  target precision reached
  target precision  : 0.000001
  precision reached : 0.000001

-------------------------------------------------------------------------------
 Time   |#Trial |#Backup |LBound    |UBound    |Precision  |#Alphas |#Beliefs
-------------------------------------------------------------------------------
 0       43      1393     19.3714    19.3714    9.22729e-07 5        21
-------------------------------------------------------------------------------

Writing out policy ...
  output file : temp-pomdp.policy

[(TigerState(tiger-right), 0.5), (TigerState(tiger-left), 0.5)] listen tiger-left -1.0
[(TigerState(tiger-left), 0.85), (TigerState(tiger-right), 0.15)] listen tiger-left -1.0
[(TigerState(tiger-left), 0.9697986575573173), (TigerState(tiger-right), 0.03020134244268276)] open-right tiger-right 10.0
...
</pre></div>
</div>
</section>
</section>
<section id="policygraph-and-alphavectorpolicy">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">PolicyGraph and AlphaVectorPolicy</a><a class="headerlink" href="#policygraph-and-alphavectorpolicy" title="Permalink to this heading">¶</a></h2>
<p>PolicyGraph and AlphaVectorPolicy extend the <a class="reference internal" href="api/pomdp_py.framework.html#pomdp_py.framework.planner.Planner" title="pomdp_py.framework.planner.Planner"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Planner</span></code></a>
interface which means they have a <code class="code docutils literal notranslate"><span class="pre">plan</span></code> function that can be used to
output an action given an agent (using the agent’s belief).</p>
<dl class="py class">
<dt class="sig sig-object py" id="pomdp_py.utils.interfaces.conversion.PolicyGraph">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pomdp_py.utils.interfaces.conversion.</span></span><span class="sig-name descname"><span class="pre">PolicyGraph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">states</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pomdp_py/utils/interfaces/conversion.html#PolicyGraph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pomdp_py.utils.interfaces.conversion.PolicyGraph" title="Permalink to this definition">¶</a></dt>
<dd><p>A PolicyGraph encodes a POMDP plan. It
can be constructed from the alphas and policy graph
format output by Cassandra’s pomdp-solver.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pomdp_py.utils.interfaces.conversion.PolicyGraph.construct">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">construct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alpha_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pg_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">states</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pomdp_py/utils/interfaces/conversion.html#PolicyGraph.construct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pomdp_py.utils.interfaces.conversion.PolicyGraph.construct" title="Permalink to this definition">¶</a></dt>
<dd><p>See parse_pomdp_solve_output for detailed definitions of
alphas and pg.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>alpha_path</strong> (<em>str</em>) – Path to .alpha file</p></li>
<li><p><strong>pg_path</strong> (<em>str</em>) – Path to .pg file</p></li>
<li><p><strong>states</strong> (<em>list</em>) – List of states, ordered as in .pomdp file</p></li>
<li><p><strong>actions</strong> (<em>list</em>) – List of actions, ordered as in .pomdp file</p></li>
<li><p><strong>observations</strong> (<em>list</em>) – List of observations, ordered as in .pomdp file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pomdp_py.utils.interfaces.conversion.PolicyGraph.plan">
<span class="sig-name descname"><span class="pre">plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pomdp_py/utils/interfaces/conversion.html#PolicyGraph.plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pomdp_py.utils.interfaces.conversion.PolicyGraph.plan" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an action that is mapped by the agent belief, under this policy</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pomdp_py.utils.interfaces.conversion.PolicyGraph.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observation</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pomdp_py/utils/interfaces/conversion.html#PolicyGraph.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pomdp_py.utils.interfaces.conversion.PolicyGraph.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the planner based on real action and observation.
Basically sets the current node pointer based on the incoming
observation.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pomdp_py.utils.interfaces.conversion.</span></span><span class="sig-name descname"><span class="pre">AlphaVectorPolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alphas</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">states</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pomdp_py/utils/interfaces/conversion.html#AlphaVectorPolicy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>An offline POMDP policy is specified by a collection
of alpha vectors, each associated with an action. When
planning is needed, the dot product of these alpha vectors
and the agent’s belief vector is computed and the alpha
vector leading to the maximum is the ‘dominating’ alpha
vector and we return its corresponding action.</p>
<p>An offline policy can be optionally represented as
a policy graph. In this case, the agent can plan without
actively maintaining a belief because the policy graph
is a finite state machine that transitions by observations.</p>
<p>This can be constructed using .policy file created by sarsop.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy.plan">
<span class="sig-name descname"><span class="pre">plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pomdp_py/utils/interfaces/conversion.html#AlphaVectorPolicy.plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy.plan" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an action that is mapped by the agent belief, under this policy</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">belief</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pomdp_py/utils/interfaces/conversion.html#AlphaVectorPolicy.value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy.value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value V(b) under this alpha vector policy.</p>
<p><span class="math notranslate nohighlight">\(V(b) = max_{a\in\Gamma} {a} \cdot b\)</span></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy.construct">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">construct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">states</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pomdpsol'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pomdp_py/utils/interfaces/conversion.html#AlphaVectorPolicy.construct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy.construct" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an AlphaVectorPolicy, given <cite>alphas</cite>,
which are the output of parse_appl_policy_file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>policy_path</strong> (<em>str</em>) – Path to the generated .policy file
(for sarsop) or .alpha file (for pomdp-solve)</p></li>
<li><p><strong>states</strong> (<em>list</em>) – A list of States, in the same order as in the .pomdp file</p></li>
<li><p><strong>actions</strong> (<em>list</em>) – A list of Actions, in the same order as in the .pomdp file</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The policy stored in the given policy file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy" title="pomdp_py.utils.interfaces.conversion.AlphaVectorPolicy">AlphaVectorPolicy</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2020-2021, H2R@Brown.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/examples.external_solvers.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>